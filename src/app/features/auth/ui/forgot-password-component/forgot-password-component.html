<main class="w-full min-h-screen flex items-center justify-center p-8 lg:p-12">
  <section hlmCard class="w-full max-w-md">
    <header hlmCardHeader class="space-y-1">
      <div class="flex items-center justify-between">
        <h3 hlmCardTitle class="text-2xl">Recuperar contraseña</h3>
        <button hlmBtn class="cursor-pointer" variant="ghost" size="sm" routerLink="/auth/account/login">Volver</button>
      </div>
      <p hlmCardDescription>
        @if (!emailSent()) {
          Ingresa tu correo electrónico y te enviaremos un enlace para
            restablecer tu contraseña
        } @else {
          Correo enviado exitosamente
        }
      </p>
    </header>

    <div hlmCardContent>
      @if (!emailSent()) {
        <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="space-y-4">
          <div class="space-y-2">
            <label hlmLabel for="forgot-email">Correo electrónico</label>
            <input
              type="email"
              id="forgot-email"
              placeholder="correo@ejemplo.com"
              formControlName="email"
              hlmInput
              [class.border-destructive]="getFieldError('email')"
            />
            @if (getFieldError('email')) {
              <p class="text-xs text-destructive">{{ getFieldError('email') }}</p>
            }
          </div>

          <button
            hlmBtn
            type="submit"
            class="w-full cursor-pointer"
            [disabled]="forgotPasswordForm.invalid || isLoading()"
          >
            @if (isLoading()) {
              <hlm-spinner size="sm" class="mr-2"/>
              <span>Enviando...</span>
            } @else {
              <span>Enviar enlace de recuperación</span>
            }
          </button>
        </form>
      } @else {
        <div class="space-y-4 text-center">
          <div class="rounded-lg bg-green-50 dark:bg-green-950 p-4 space-y-2">
            <p class="text-sm text-green-800 dark:text-green-200">
              Si el correo está registrado, recibirás un enlace de recuperación en tu bandeja de
              entrada.
            </p>
            <p class="text-xs text-green-700 dark:text-green-300">
              Por favor, revisa también tu carpeta de spam.
            </p>
          </div>

          <p class="text-sm text-muted-foreground">
            El enlace es válido por <strong>15 minutos</strong>.
          </p>
        </div>
      }
    </div>

    <footer hlmCardFooter class="flex flex-col space-y-2">
      @if (!emailSent()) {
        <p class="text-center text-sm text-muted-foreground">
          ¿Recordaste tu contraseña?
          <a routerLink="/auth/account/login" class="underline underline-offset-4 hover:text-primary">
            Iniciar sesión
          </a>
        </p>
      } @else {
        <button hlmBtn variant="outline" class="w-full" routerLink="/auth/account/login">
          Volver al inicio de sesión
        </button>
      }
    </footer>
  </section>
</main>
