<main class="container mx-auto p-6 max-w-4xl">
  <section hlmCard>
    <header hlmCardHeader>
      <div class="flex items-center justify-between">
        <div>
          <h3 hlmCardTitle>Crear Categoría de Servicio</h3>
          <p hlmCardDescription>
            Ingresa el nombre y descripción de la nueva categoría de servicio
          </p>
        </div>
        <button
          hlmBtn
          variant="ghost"
          size="icon"
          type="button"
          (click)="onCancel()"
          [disabled]="isSubmitting()"
        >
          <ng-icon hlm size="sm" name="lucideArrowLeft"/>
        </button>
      </div>
    </header>

    <hlm-separator/>

    <div hlmCardContent class="pt-6">
      <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <hlm-form-field>
          <label hlmLabel for="name" class="flex items-center justify-between">
            <span>
              Nombre
              <span class="text-destructive ml-1">*</span>
            </span>
            <span class="text-xs text-muted-foreground font-normal">
              {{ nameCharCount() }}/100
            </span>
          </label>
          <input
            hlmInput
            id="name"
            formControlName="name"
            type="text"
            placeholder="Ej: Instalación de Fibra Óptica"
            maxlength="100"
            class="w-full"
          />
          @if (getNameError()) {
            <hlm-error>{{ getNameError() }}</hlm-error>
          } @else {
            <hlm-hint>Ingresa un nombre único para la categoría (máximo 100 caracteres)</hlm-hint>
          }
        </hlm-form-field>

        <hlm-form-field>
          <label hlmLabel for="description" class="flex items-center justify-between">
            <span>Descripción (Opcional)</span>
            <span class="text-xs text-muted-foreground font-normal">
              {{ descriptionCharCount() }} caracteres
            </span>
          </label>
          <textarea
            hlmInput
            id="description"
            formControlName="description"
            placeholder="Describe los servicios incluidos en esta categoría..."
            rows="5"
            class="w-full"
          ></textarea>
          <hlm-hint>Proporciona una descripción detallada de la categoría (opcional)</hlm-hint>
        </hlm-form-field>

        <div class="flex items-center gap-3 justify-end pt-4">
          <button
            class="cursor-pointer"
            hlmBtn
            variant="outline"
            type="button"
            (click)="onCancel()"
            [disabled]="isSubmitting()"
          >
            Cancelar
          </button>
          <button
            hlmBtn
            type="submit"
            [disabled]="categoryForm.invalid || isSubmitting()"
            class="flex items-center gap-2 cursor-pointer"
          >
            @if (isSubmitting()) {
              <hlm-spinner size="sm"/>
              <span>Creando...</span>
            } @else {
              <ng-icon hlm size="sm" name="lucideSave"/>
              <span>Crear Categoría</span>
            }
          </button>
        </div>
      </form>
    </div>
  </section>
</main>
